<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Underwater Game Settings</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Settings</h1>
  <label for="volume">Volume:</label>
  <input type="range" id="volume" min="0" max="10" value="5">
  <br>
  <label for="screenshake">Screenshake:</label>
  <input type="checkbox" id="screenshake">
  
  <script>
    // Initialize settings
    let volume = 5;
    let screenshake = true;

    // Function to update settings display
    function updateSettingsDisplay() {
      const screenshakeText = screenshake ? "On" : "Off";
      document.getElementById('settingsDisplay').textContent = `Volume: ${volume}, Screenshake: ${screenshakeText}`;
    }

    // Function to handle single press
    function handleSinglePress() {
      const elements = document.querySelectorAll('input[type="range"], input[type="checkbox"]');
      let currentIndex = Array.from(elements).findIndex(element => element === document.activeElement);
      const nextIndex = (currentIndex + 1) % elements.length;
      elements[nextIndex].focus();
    }

    // Function to handle double press
    function handleDoublePress() {
      document.activeElement.addEventListener('keydown', handleSettingChange);
    }

    // Function to handle setting change
    function handleSettingChange(event) {
      if (event.code === 'Space') {
        if (document.activeElement.type === 'range') {
          volume = document.activeElement.value;
        } else if (document.activeElement.type === 'checkbox') {
          screenshake = document.activeElement.checked;
        }
        updateSettingsDisplay();
      } else if (event.code === 'Space' && event.repeat) {
        document.activeElement.removeEventListener('keydown', handleSettingChange);
      }
    }

    // Function to handle triple press
    function handleTriplePress() {
      // Apply settings
      alert('Settings Applied!');
    }

    // Add event listener for key press
    document.addEventListener('keydown', event => {
      if (event.code === 'Space') {
        if (!event.repeat) { // To ensure the event is not repeated
          handleSinglePress();
        } else if (event.repeat && document.activeElement !== document.body) {
          handleDoublePress();
        } else if (event.repeat && document.activeElement === document.body) {
          handleTriplePress();
        }
      }
    });

    // Update settings display on page load
    updateSettingsDisplay();
  </script>
</body>
</html>
